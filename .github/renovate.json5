{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: ["config:recommended"],
  dependencyDashboard: true,
  dependencyDashboardApproval: false,
  schedule: null,
  labels: ["dependencies"],
  commitMessagePrefix: "chore(deps):",
  prHourlyLimit: 0,
  prConcurrentLimit: 10,
  platformAutomerge: true,
  packageRules: [
    {
      matchUpdateTypes: ["major", "minor", "patch"],
      automerge: true,
      automergeType: "pr",
      description: "Auto-merge all updates after CI passes",
    },
    {
      matchDatasources: ["github-releases"],
      matchPackageNames: ["hashicorp/terraform"],
      addLabels: ["terraform"],
      commitMessagePrefix: "chore(terraform):",
      groupName: "Terraform",
      description: "Group Terraform version updates across devcontainer and GitHub Actions",
    },
    {
      matchManagers: ["terraform"],
      addLabels: ["terraform"],
      commitMessagePrefix: "chore(terraform):",
      groupName: "Terraform providers",
    },
    {
      matchManagers: ["npm"],
      addLabels: ["npm"],
      commitMessagePrefix: "chore(deps-npm):",
      rangeStrategy: "bump",
      semanticCommitType: "chore",
      semanticCommitScope: "deps",
    },
    {
      matchManagers: ["npm"],
      matchDepTypes: ["devDependencies"],
      addLabels: ["npm"],
      commitMessagePrefix: "npm(deps-dev):",
      rangeStrategy: "bump",
    },
    {
      matchManagers: ["github-actions"],
      addLabels: ["github-actions"],
      commitMessagePrefix: "chore(github-actions):",
      groupName: "GitHub Actions",
    },
  ],
  customManagers: [
    {
      customType: "regex",
      managerFilePatterns: ["/^\\.github/workflows/.+\\.ya?ml$/"],
      matchStrings: [
        "terraform_version:\\s*['\"]?(?<currentValue>[^'\"\\s]+)['\"]?",
      ],
      datasourceTemplate: "github-releases",
      depNameTemplate: "hashicorp/terraform",
      extractVersionTemplate: "^v?(?<version>.*)$",
    },
    {
      customType: "regex",
      managerFilePatterns: ["/^\\.devcontainer/devcontainer\\.json$/"],
      matchStrings: [
        '"ghcr\\.io/devcontainers/features/terraform:1":\\s*\\{\\s*"version":\\s*"(?<currentValue>[^"]+)"',
      ],
      datasourceTemplate: "github-releases",
      depNameTemplate: "hashicorp/terraform",
      extractVersionTemplate: "^v?(?<version>.*)$",
    },
  ],
}
